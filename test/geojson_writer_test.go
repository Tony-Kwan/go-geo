package test

import (
	"github.com/Tony-Kwan/go-geo/geo"
	"github.com/Tony-Kwan/go-geo/geo/io/geojson"
	"github.com/Tony-Kwan/go-geo/geo/io/wkt"
	"github.com/atotto/clipboard"
	"testing"
)

func TestGeojson_EncodePolygon(t *testing.T) {
	var wktStr = "POLYGON((-119.14159855412011 41.92499096272812,-102.87886464247828 26.767453854346442,-90.9950327117614 32.905865438530256,-93.78787570746942 36.051610613180415,-98.38245074916146 33.171901863337226,-102.05698491988139 36.07009780383788,-96.33267709169169 38.664513680653954,-88.4319360597416 37.10206976053486,-87.28074151678913 30.775914227484662,-87.59809404666174 26.844389706437113,-79.64598553204937 29.904465341243238,-80.44042235294994 37.59795124939845,-84.81650967729065 43.819424657392034,-96.2837724335406 40.82461783417634,-98.73181999767975 46.03621512184026,-103.30774793950121 42.50917847188873,-108.37624078356396 46.00372124466807,-119.14159855412011 41.92499096272812))"
	polygon := wkt.MustPolygon(wkt.WktReader{}.Read(wktStr))
	out := geojson.GeojsonWriter{}.EncodePolygon(polygon, map[string]interface{}{
		"stroke":         "#555555",
		"stroke-width":   1,
		"stroke-opacity": 1,
		"fill":           "#a6ebf4",
		"fill-opacity":   0.5,
	})
	clipboard.WriteAll(out)
}

func TestGeojson_EncodePolygons(t *testing.T) {
	p1 := wkt.MustPolygon(wkt.WktReader{}.Read("POLYGON((-125.48143431544301 48.948882828004685,-125.47899752855298 48.9262328193777,-125.43090820312497 48.934928974136284,-125.48143431544301 48.948882828004685))"))
	p2 := wkt.MustPolygon(wkt.WktReader{}.Read("POLYGON((-125.43894007802008 48.931920293578486,-125.43749302625652 48.90958431384354,-125.38551449775694 48.926547387547174,-125.39115384221074 48.938403488223685,-125.43894007802008 48.931920293578486))"))
	ps := []geo.Polygon{p1, p2}
	out := geojson.GeojsonWriter{}.EncodePolygons(ps)
	clipboard.WriteAll(out)
}
